<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xmas Surprise 2025 - Gift Edition</title>
    <style>
        body, html { 
            margin: 0; padding: 0; 
            width: 100%; height: 100%; 
            overflow: hidden; 
            font-family: 'Arial', sans-serif; 
        }

        #welcome-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ffebee, #ffc0cb, #ff9ec1);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.8s ease;
        }

        .container {
            display: flex;
            width: 90%;
            max-width: 1100px;
            height: 75vh;
            background: rgba(255, 255, 255, 0.75);
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 20px 70px rgba(255,105,180,0.3);
            backdrop-filter: blur(12px);
        }

        .left-side {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .left-side img {
            max-width: 100%;
            max-height: 90%;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(255,105,180,0.4);
        }

        .right-side {
            flex: 1.2;
            padding: 50px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #c2185b;
        }

        .subtitle {
            font-size: 1.6em;
            color: #ff1493;
            margin-bottom: 10px;
        }

        .hint {
            font-size: 1.3em;
            color: #ff69b4;
            margin-bottom: 40px;
            text-align: center;
            font-weight: bold;
        }

        .calculator {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .calc-btn {
            padding: 22px;
            font-size: 1.5em;
            font-weight: bold;
            background: #ffffff;
            border: 4px solid #ff69b4;
            border-radius: 18px;
            color: #333;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .calc-btn:hover {
            background: #fff0f5;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255,105,180,0.3);
        }

        #password-display {
            width: 100%;
            padding: 16px;
            font-size: 2.2em;
            text-align: center;
            background: #ffffff;
            border: 4px solid #ff69b4;
            border-radius: 18px;
            color: #c2185b;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        #error-msg {
            color: #ff1493;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 20px;
            display: none;
        }

        /* === PH·∫¶N C√ÇY TH√îNG & L√Å TH∆Ø === */
        #letter-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); display: none;
            justify-content: center; align-items: center; z-index: 10000;
        }

        #letter {
            background: #fdf5e6; padding: 40px; width: 90%; max-width: 500px;
            border-radius: 15px; border: 5px solid #ffc107; 
            box-shadow: 0 0 40px #ffd700;
            transform: scale(0); transition: transform 0.5s ease;
            text-align: center;
            position: relative;
        }

        #letter.open { transform: scale(1); }
        .close-btn { position: absolute; top: 10px; right: 15px; font-size: 30px; cursor: pointer; color: #d42426; font-weight: bold; }

        #gift-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            color: #d42426;
            padding: 12px 30px;
            border-radius: 15px;
            font-size: 1.4em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 100;
            pointer-events: none;
            text-align: center;
            white-space: nowrap;
        }
    </style>
</head>
<body>

    <div id="welcome-screen">
        <div class="container">
            <div class="left-side">
                <img src="noel1.png" alt="Christmas Tree">
            </div>
            <div class="right-side">
                <div class="subtitle">Nh·∫≠p m·∫≠t m√£ ƒë·ªÉ m·ªü</div>
                <div class="hint">M√£ l√† 16/09 nh√©! üíï</div>
                
                <div id="password-display">____</div>

                <div class="calculator">
                    <button class="calc-btn" onclick="addDigit('1')">1</button>
                    <button class="calc-btn" onclick="addDigit('2')">2</button>
                    <button class="calc-btn" onclick="addDigit('3')">3</button>
                    <button class="calc-btn" onclick="addDigit('4')">4</button>
                    <button class="calc-btn" onclick="addDigit('5')">5</button>
                    <button class="calc-btn" onclick="addDigit('6')">6</button>
                    <button class="calc-btn" onclick="addDigit('7')">7</button>
                    <button class="calc-btn" onclick="addDigit('8')">8</button>
                    <button class="calc-btn" onclick="addDigit('9')">9</button>
                    <button class="calc-btn" onclick="addDigit('0')">0</button>
                    <button class="calc-btn" onclick="addDigit('/')">/</button>
                    <button class="calc-btn" onclick="clearInput()">X</button>
                </div>

                <div id="error-msg">M·∫≠t m√£ sai r·ªìi! H√£y th·ª≠ l·∫°i nh√© üíï</div>
            </div>
        </div>
    </div>

    <div id="letter-overlay" onclick="closeLetter()">
        <div id="letter" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeLetter()">√ó</span>
            <div style="font-size: 40px; margin-bottom: 10px;">üì©</div>
            <h2 style="color: #000; margin-bottom: 20px;">Gi√°ng Sinh Mai Ph∆∞∆°ng Uy√™n!</h2>
            <p style="color: #333; line-height: 1.6; font-size: 1.1em; text-align: justify;">
                Ch√∫c em g√°i tu·ªïi 18 m·ªôt Gi√°ng sinh th·∫≠t r·ª±c r·ª°! Mong em nƒÉm m·ªõi 2026 g·∫∑p nhi·ªÅu ƒëi·ªÅu t·ªët ƒë·∫πp, h·ªçc h√†nh th·∫≠t gi·ªèi v√† ƒë·∫°t ƒë∆∞·ª£c nhi·ªÅu th√†nh c√¥ng h∆°n trong h·ªçc t·∫≠p, c√¥ng vi·ªác c·ªßa m√¨nh, v√† lu√¥n gi·ªØ ƒë∆∞·ª£c n·ª• c∆∞·ªùi r·∫°ng r·ª° nha.
            </p>
            <p style="color: #333; line-height: 1.6; font-size: 1.1em; text-align: justify;">
                Merry Christmas em g√°i tu·ªïi 18! Ch√∫c em m·ªôt m√πa Gi√°ng sinh th·∫≠t ng·ªçt ng√†o, nhi·ªÅu ni·ªÅm vui, v√† b∆∞·ªõc sang nƒÉm m·ªõi v·ªõi th·∫≠t nhi·ªÅu th√†nh c√¥ng.
            </p>
            <p style="color: #d42426; font-weight: bold; font-size: 1.2em; margin-top: 20px;">
                Mai H∆∞u Ph∆∞·ªõc Merry Christmas! üéÑ‚ú®
            </p>
        </div>
    </div>

    <div id="gift-hint">Click v√†o h·ªôp qu√† v√†ng ƒë·ªÉ m·ªü th∆∞ ch√∫c m·ª´ng! üéÅ</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let input = '';
        const display = document.getElementById('password-display');
        const errorMsg = document.getElementById('error-msg');

        function updateDisplay() {
            display.textContent = input.padEnd(5, '_').slice(0, 5);
        }

        function addDigit(digit) {
            if (input.length < 5) {
                input += digit;
                updateDisplay();
                if (input.length === 5) checkPassword();
            }
        }

        function clearInput() {
            input = '';
            updateDisplay();
            errorMsg.style.display = 'none';
        }

        function checkPassword() {
            // ƒê√£ ƒë·ªïi m√£ th√†nh 16/09
            if (input === '16/09') {
                document.getElementById('welcome-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('welcome-screen').style.display = 'none';
                    initEverything();
                }, 800);
            } else {
                errorMsg.style.display = 'block';
                setTimeout(() => errorMsg.style.display = 'none', 2000);
            }
        }

        // Logic 3D Tree gi·ªØ nguy√™n nh∆∞ code c≈© c·ªßa b·∫°n
        let scene, camera, renderer, specialBox, textSprite;
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        function createTextSprite(text) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 2048; canvas.height = 512;
            context.font = 'Bold 180px Arial';
            context.textAlign = 'center'; context.textBaseline = 'middle';
            context.shadowColor = "rgba(255, 0, 0, 0.9)"; context.shadowBlur = 50;
            context.fillStyle = '#ffffff';
            context.fillText(text, 1024, 256);
            const texture = new THREE.CanvasTexture(canvas);
            const sprite = new THREE.Sprite(new THREE.SpriteMaterial({ map: texture, transparent: true }));
            sprite.scale.set(50, 12, 1);
            return sprite;
        }

        function initEverything() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            textSprite = createTextSprite("Merry Christmas");
            textSprite.position.set(0, 25, -15);
            scene.add(textSprite);

            const starShape = new THREE.Shape();
            for (let i = 0; i < 10; i++) {
                const angle = (i * Math.PI) / 5;
                const radius = i % 2 === 0 ? 1 : 0.5;
                if (i === 0) starShape.moveTo(Math.cos(angle) * radius, Math.sin(angle) * radius);
                else starShape.lineTo(Math.cos(angle) * radius, Math.sin(angle) * radius);
            }
            const geometry = new THREE.ExtrudeGeometry(starShape, { depth: 0.4, bevelEnabled: true, bevelThickness: 0.1, bevelSize: 0.1 });
            const matYellow = new THREE.MeshPhongMaterial({ color: 0xffff00, shininess: 100 });
            const matGreen = new THREE.MeshPhongMaterial({ color: 0x006600, shininess: 80 });

            const starsGroup = new THREE.Group();
            const layers = 15;
            for (let layer = 0; layer < layers; layer++) {
                const radius = 10 - layer * 0.6;
                for (let i = 0; i < 35; i++) {
                    const angle = (i / 35) * Math.PI * 2;
                    const star = new THREE.Mesh(geometry, matGreen.clone());
                    star.scale.set(0.4, 0.4, 0.4);
                    star.position.set(radius * Math.cos(angle), layer * 2, radius * Math.sin(angle));
                    star.rotation.y = Math.random() * Math.PI;
                    starsGroup.add(star);
                }
            }
            scene.add(starsGroup);

            const topStar = new THREE.Mesh(geometry, matYellow);
            topStar.scale.set(2.5, 2.5, 2.5);
            topStar.position.y = layers * 2 + 2;
            scene.add(topStar);

            const ornaments = new THREE.Group();
            const sphereGeo = new THREE.SphereGeometry(0.4, 16, 16);
            for (let i = 0; i < 150; i++) {
                const l = Math.random() * layers;
                const r = 10 - l * 0.6 + 0.5;
                const a = Math.random() * Math.PI * 2;
                const mat = new THREE.MeshPhongMaterial({ color: Math.random() > 0.5 ? 0xff0000 : 0xdddddd });
                const orb = new THREE.Mesh(sphereGeo, mat);
                orb.position.set(r * Math.cos(a), l * 2, r * Math.sin(a));
                ornaments.add(orb);
            }
            scene.add(ornaments);

            const snowGroup = new THREE.Group();
            for (let i = 0; i < 1000; i++) {
                const s = new THREE.Mesh(new THREE.SphereGeometry(0.1, 6, 6), new THREE.MeshBasicMaterial({ color: 0xffffff }));
                s.position.set((Math.random()-0.5)*80, Math.random()*50, (Math.random()-0.5)*80);
                s.userData.v = Math.random() * 0.1 + 0.05;
                snowGroup.add(s);
            }
            scene.add(snowGroup);

            const giftsGroup = new THREE.Group();
            const giftColors = [0xd42426, 0x2d5a27, 0x1e90ff, 0xffa500, 0x800080];
            const gifts = [];
            for (let i = 0; i < 12; i++) {
                const size = Math.random() * 0.7 + 0.8;
                const giftGeo = new THREE.BoxGeometry(size, size, size);
                const giftMat = new THREE.MeshPhongMaterial({ color: giftColors[Math.floor(Math.random() * giftColors.length)] });
                const gift = new THREE.Mesh(giftGeo, giftMat);
                const angle = Math.random() * Math.PI * 2;
                const radius = Math.random() * 4 + 4;
                gift.position.set(Math.cos(angle) * radius, size / 2, Math.sin(angle) * radius);
                gift.userData = { originalY: size / 2, jumpSpeed: Math.random() * 0.05 + 0.03, offset: Math.random() * Math.PI * 2 };
                gifts.push(gift);
                giftsGroup.add(gift);
            }
            scene.add(giftsGroup);

            const specialGeo = new THREE.BoxGeometry(2.2, 2.2, 2.2);
            const specialMat = new THREE.MeshPhongMaterial({ color: 0xffd700, shininess: 100 });
            specialBox = new THREE.Mesh(specialGeo, specialMat);
            specialBox.position.set(0, 1.1, 14);
            const specialRibbon = new THREE.Mesh(new THREE.BoxGeometry(2.3, 0.4, 2.3), new THREE.MeshPhongMaterial({ color: 0xd42426 }));
            specialBox.add(specialRibbon);
            scene.add(specialBox);

            scene.add(new THREE.AmbientLight(0x404040));
            const pLight = new THREE.PointLight(0xffffff, 1.5, 100);
            pLight.position.set(10, 30, 20);
            scene.add(pLight);

            camera.position.set(0, 12, 40);
            camera.lookAt(0, 8, 0);

            window.addEventListener('click', onDocumentClick, false);

            function animate() {
                requestAnimationFrame(animate);
                starsGroup.rotation.y += 0.005;
                ornaments.rotation.y += 0.005;
                topStar.rotation.y += 0.02;

                const time = Date.now() * 0.001;
                textSprite.position.y = 25 + Math.sin(time) * 1.5;
                
                snowGroup.children.forEach(s => {
                    s.position.y -= s.userData.v;
                    if(s.position.y < 0) s.position.y = 50;
                });

                gifts.forEach(gift => {
                    gift.userData.offset += gift.userData.jumpSpeed;
                    gift.position.y = gift.userData.originalY + Math.abs(Math.sin(gift.userData.offset)) * 0.6;
                    gift.rotation.y += 0.01;
                });

                specialBox.rotation.y += 0.015;
                specialBox.position.y = 1.1 + Math.sin(Date.now() * 0.002) * 0.5;

                renderer.render(scene, camera);
            }
            animate();
        }

        function onDocumentClick(event) {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(scene.children, true);
            for (let i = 0; i < intersects.length; i++) {
                let obj = intersects[i].object;
                if (obj === specialBox || obj.parent === specialBox) {
                    openLetter();
                    break;
                }
            }
        }

        function openLetter() {
            const overlay = document.getElementById('letter-overlay');
            const letter = document.getElementById('letter');
            overlay.style.display = 'flex';
            setTimeout(() => letter.classList.add('open'), 10);
        }

        function closeLetter() {
            const overlay = document.getElementById('letter-overlay');
            const letter = document.getElementById('letter');
            letter.classList.remove('open');
            setTimeout(() => overlay.style.display = 'none', 500);
        }

        window.addEventListener('resize', () => {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });

        updateDisplay();
    </script>
</body>
</html>